@{
    ViewData["Title"] = "Home Page";
}

<link href="~/css/main.css" rel="stylesheet" />
<script src="~/lib/range-slider/js/ion.rangeSlider.min.js"></script>
<link href="~/lib/range-slider/css/ion.rangeSlider.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.1.4/Chart.min.js"></script>

@*
    <!---Resizable panel section-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="~/lib/pane-splitter/jquery.slider.js"></script>

    <div class="wrapper">
        <div id="panelContainer">
            <div class="panel one">
                <div class="content">
                    <h1>jQuery Pane Slider Example</h1>
                    <div id="carbon-block" style="margin:30px auto"></div>
                    <div style="margin:30px auto">
                    </div>
                </div>
            </div>
            <div class="panel two">
                <div class="content">
                    Panel Two
                </div>
                <span class="slider"></span>
            </div>
        </div>
    </div>
*@

@*<div class="text-center">
        <h1 class="display-4">Welcome</h1>
        <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
    </div>*@

<script>
    function loadData(element, id) {
        $.ajax({
            url: "../Home/GetMoisture",
            type: "POST",
            beforeSend: function () { // Before we send the request, remove the .hidden class from the spinner and default to inline-block.
                //$('#loader').removeClass('hidden')
            },
            data: {
                deviceId: id
            },
            success: function (data) {
                element.innerHTML = data;
                renderChart();
            },
            error: function () {

            },
            complete: function () { // Set our complete callback, adding the .hidden class and hiding the spinner.
                //$('#loader').addClass('hidden')
            }
        });
    }

    $("#apply-filters").click(function () {
        beginIndex = 0;
        endIndex = 24;
        loadedEverything = false;
        $("#influencersGrid").empty();
        loadData();
    });
</script>

<div class="wrapper container">
    <div class="row" style="height:100%;">
        <div id="content" class="col">
            <!-- Add references to the Azure Maps Map control JavaScript and CSS files. -->
            <link rel="stylesheet" href="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.css" type="text/css" />
            <script src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.js"></script>

            <!-- Add a reference to the Azure Maps Services Module JavaScript file. -->
            <script src="https://atlas.microsoft.com/sdk/javascript/service/2/atlas-service.min.js"></script>

            <link href="../css/map.css" rel="stylesheet" />
            <script src="../js/map.js"></script>

            <div id="myMap" style="width: 100%; height: 100%;"></div>
            <div id="search">
                <div class="search-input-box">
                    <div class="search-input-group">
                        <div class="search-icon" type="button"></div>
                        <input id="search-input" type="text" placeholder="Search">
                    </div>
                </div>
                <ul id="results-panel"></ul>
            </div>
            <script type="text/javascript">
                GetMap();
            </script>

        </div>
        <div id="sidebar" class="fixed">
            <div class="sidebar-header">
                <h2>Filters</h2>
            </div>
            <div class="h-divider">
            </div>
            <div class="bs-component">
                <form>
                    <fieldset>
                        <fieldset class="form-group">
                            <label for="select-species">Species</label>
                            <select id="select-species" class="form-control">
                                <option>None selected</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="select-age">Age Class</label>
                            <select id="select-age" class="form-control">
                                <option>None selected</option>
                                <option>Seedling</option>>
                                <option>Sapling</option>
                                <option>Pole</option>
                                <option>Mature</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="select-owner">Landownership Type</label>
                            <select id="select-owner" class="form-control">
                                <option>None selected</option>
                                <option>City Property</option>
                                <option>City Park</option>
                                <option>Private</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="select-diameter">Diameter</label>
                            <select id="select-diameter" class="form-control">
                                <option>None selected</option>
                                <option>None selected</option>
                                <option>None selected</option>
                                <option>None selected</option>
                                <option>None selected</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="rangeMoisture">Moisture</label>
                            <div class="form-control-wrap">
                                <input id="rangeMoisture" type="text" class="js-range-slider" name="my_range" value="" />
                            </div>
                        </fieldset>

                        <fieldset class="form-group" style="margin-top: 2rem">
                            <button type="reset" class="btn btn-secondary">Clear Filters</button>
                            <button type="submit" class="btn btn-primary">Apply Filters</button>
                        </fieldset>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<!-- For the final product, all this modal stuff has to change. For demonstration purposes here only -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Tree Details</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <canvas width="800" height="400" id="historicalChart"></canvas>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<!-- For the final product, all this modal stuff has to change. For demonstration purposes here only -->
<div class="modal fade" id="reportModal" tabindex="-1" role="dialog" aria-labelledby="reportModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="reportModalLabel">Report Care Actions</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <fieldset>
                        <fieldset class="form-group">
                            <label for="select-care">Care Options</label>
                            <select id="select-care" class="form-control">
                                <option>Watering</option>
                                <option>Pruning</option>
                                <option>Other</option>
                            </select>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="text-notes">Notes</label>
                            <input type="text" id="text-notes"  class="form-control"/>
                        </fieldset>

                        <fieldset class="form-group">
                            <label for="text-caretaker">Caretaker</label>
                            <input type="text" id="text-caretaker"  class="form-control" />
                        </fieldset>
                    </fieldset>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Submit</button>
            </div>
        </div>
    </div>
</div>

<script>
    new Chart(document.getElementById("historicalChart"), {
        type: 'line',
        data: {
            labels: ["5/14", "5/15", "5/16", "5/17", "5/18", "5/19", "5/20", "5/21", "5/22", "5/23"],
            datasets: [{
                data: [8.6, 11.4, 10.6, 10.6, 10.7, 11.1, 13.3, 22.1, 7.83, 24.78],
                label: "24 in. Depth Moisture Percentage Over Time",
                borderColor: "#3e95cd",
                fill: false
            }]
        },
        options: {
            title: {
                display: false
            },
            scales: {
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Soil Moisture %'
                    }
                }]
            }
        }
    });
</script>
<script src="~/js/main.js"></script>
<script src="~/js/popup.js"></script>